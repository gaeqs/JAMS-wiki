"use strict";(self.webpackChunkjamswiki=self.webpackChunkjamswiki||[]).push([[391],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return m}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var o=a.createContext({}),u=function(e){var t=a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=u(e.components);return a.createElement(o.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},g=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),g=u(n),m=r,h=g["".concat(o,".").concat(m)]||g[m]||p[m]||i;return n?a.createElement(h,l(l({ref:t},c),{},{components:n})):a.createElement(h,l({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,l=new Array(i);l[0]=g;var s={};for(var o in t)hasOwnProperty.call(t,o)&&(s[o]=t[o]);s.originalType=e,s.mdxType="string"==typeof e?e:r,l[1]=s;for(var u=2;u<i;u++)l[u]=n[u];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}g.displayName="MDXCreateElement"},8472:function(e,t,n){n.r(t),n.d(t,{assets:function(){return c},contentTitle:function(){return o},default:function(){return m},frontMatter:function(){return s},metadata:function(){return u},toc:function(){return p}});var a=n(7462),r=n(3366),i=(n(7294),n(3905)),l=["components"],s={sidebar_position:8},o="Languages",u={unversionedId:"architecture/languages",id:"architecture/languages",title:"Languages",description:"Just like any modern application, JAMS presents a localization system based on language packets.",source:"@site/docs/architecture/languages.md",sourceDirName:"architecture",slug:"/architecture/languages",permalink:"/docs/architecture/languages",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/architecture/languages.md",tags:[],version:"current",sidebarPosition:8,frontMatter:{sidebar_position:8},sidebar:"docsSidebar",previous:{title:"Memory",permalink:"/docs/architecture/memory"},next:{title:"Themes",permalink:"/docs/architecture/themes"}},c={},p=[{value:"Packet structure",id:"packet-structure",level:2},{value:"Attachments",id:"attachments",level:2},{value:"Fetching messages",id:"fetching-messages",level:2},{value:"Manually",id:"manually",level:3},{value:"Using a prefab",id:"using-a-prefab",level:3}],g={toc:p};function m(e){var t=e.components,n=(0,r.Z)(e,l);return(0,i.kt)("wrapper",(0,a.Z)({},g,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"languages"},"Languages"),(0,i.kt)("p",null,"Just like any modern application, JAMS presents a localization system based on language packets."),(0,i.kt)("p",null,"Any user or plugin can create a language packet that adds or modifies a language."),(0,i.kt)("h2",{id:"packet-structure"},"Packet structure"),(0,i.kt)("p",null,"A language packet is a folder or compressed file that contains a ",(0,i.kt)("inlineCode",{parentName:"p"},"language.json")," file and\nseveral ",(0,i.kt)("a",{parentName:"p",href:"https://yaml.org/"},"YAML")," files. This folder or file can be located inside a plugin or inside\nthe ",(0,i.kt)("inlineCode",{parentName:"p"},"~/JAMS/languages")," folder."),(0,i.kt)("p",null,"An example of a ",(0,i.kt)("inlineCode",{parentName:"p"},"janguage.json")," file will be the following:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="language.json"',title:'"language.json"'},'{\n  "name": "English",\n  "priority": 0,\n  "files": [\n    "actions.yml",\n    "configuration.yml",\n    "directives.yml",\n    "editor.yml",\n    "general.yml",\n    "instructions.yml",\n    "interface.yml",\n    "mips_elements.yml",\n    "mips_simulation_configuration.yml",\n    "simulation.yml"\n  ]\n}\n')),(0,i.kt)("p",null,"The file contains the following parameters:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"name"),": the name of the language. This name is the one shown to the user, and it acts as the language's identifier."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"files"),": the YAML files composing the packet."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"priority"),": the priority of the packet when several packets with the same language exists. The packet will have more\npriority the bigger this number is. This parameter is ",(0,i.kt)("strong",{parentName:"li"},"optional")," and its default value is 0.")),(0,i.kt)("p",null,"YAML files can be located inside folders or in the root directory of the packet. They must be defined in\nthe ",(0,i.kt)("inlineCode",{parentName:"p"},"language.json")," file using a relative path from the packet."),(0,i.kt)("p",null,"An example of a YAML file will be the following:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="interface.yml"',title:'"interface.yml"'},"START_TITLE: JAMS {VERSION}\nSTART_PROJECTS: Projects\nSTART_NEW_PROJECT: New project\nSTART_ABOUT: About\nBOTTOM_BAR_MEMORY: '{USED} of {TOTAL}MiB'\nBOTTOM_BAR_MEMORY_TOOLTIP: Click to execute the garbage collector.\n\nPROJECT_CREATOR_MIPS_ASSEMBLER: 'Assembler:'\nPROJECT_CREATOR_MIPS_INSTRUCTION_SET: 'Instruction set:'\nPROJECT_CREATOR_MIPS_DIRECTIVE_SET: 'Directive set:'\nPROJECT_CREATOR_MIPS_REGISTERS: 'Registers:'\nPROJECT_CREATOR_MIPS_EMPTY: Empty MIPS project\n\nMAIN_MENU_FILE: File\nMAIN_MENU_EDIT: Edit\nMAIN_MENU_SIMULATION: Simulation\nMAIN_MENU_TOOLS: Tools\nMAIN_MENU_HELP: Help\nMAIN_MENU_FILE_EXIT: Exit\nMAIN_MENU_FILE_SETTINGS: Settings\nMAIN_MENU_FILE_OPEN_PROJECT: Open project\nMAIN_MENU_FILE_CREATE_PROJECT: Create project\nMAIN_MENU_FILE_CREATE_PROJECT_TITLE: Create project\nMAIN_MENU_FILE_CREATE_PROJECT_NAME: 'Name:'\nMAIN_MENU_FILE_CREATE_PROJECT_PATH: 'Path:'\nMAIN_MENU_HELP_ABOUT: About\n\nPROJECT_TAB_STRUCTURE: Project structure\nPROJECT_TAB_SIMULATION: Simulation\n\nBAR_VIEW_MODE_PANE: Show in pane\nBAR_VIEW_MODE_WINDOW: Show in window\nBAR_VIEW_MODE_PERSISTENT_WINDOW: Show in persistent window\n")),(0,i.kt)("p",null,"Even though this feature is not used in any official packet, language packets can contain message sections, just like\nany other YAML file."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"ACTION:\n  MY_ACTION: My action\n")),(0,i.kt)("p",null,"In this case, the developer will use the ",(0,i.kt)("inlineCode",{parentName:"p"},"ACTION.MY_ACTION")," identifier to reference the message."),(0,i.kt)("h2",{id:"attachments"},"Attachments"),(0,i.kt)("p",null,"There may be situations where several packets target the same language. This collision problem is solved thanks to the\nattachment system."),(0,i.kt)("p",null,"A language packet will always act as a language attachment. This attachment has a ",(0,i.kt)("strong",{parentName:"p"},"priority")," defined on\nthe ",(0,i.kt)("inlineCode",{parentName:"p"},"language.json")," file. If two attachments have the same priority, the priority is solved using by creation order,\nbeing the last one to be created the one who has more priority."),(0,i.kt)("p",null,"The message attached to an identifier will be the one present in the attachment with more priority that defines the\nidentifier."),(0,i.kt)("p",null,"Thanks to this small extension system, users can create modifications, and plugins can add new messages."),(0,i.kt)("h2",{id:"fetching-messages"},"Fetching messages"),(0,i.kt)("p",null,"There are two ways to fetch messages using an identifier: ",(0,i.kt)("strong",{parentName:"p"},"manually")," or ",(0,i.kt)("strong",{parentName:"p"},"using a prefab"),"."),(0,i.kt)("h3",{id:"manually"},"Manually"),(0,i.kt)("p",null,"A plugin can access the selected language using the ",(0,i.kt)("inlineCode",{parentName:"p"},"Manager.ofS(Language.class).getSelected()")," method. The correct way\nto fetch a message is using the ",(0,i.kt)("inlineCode",{parentName:"p"},"getOrDefault(String)")," method. This method will fetch the message linked to the given\nidentifier. If the language doesn't contain the message, the method will search it in the default language. If both\nlanguages don't have the message, this method will return an empty string."),(0,i.kt)("p",null,"Usually, this procedure should be executed again when the selected language changes. This is done registering a listener\ninto the language manager that asks for a ",(0,i.kt)("inlineCode",{parentName:"p"},"LanguageRefreshEvent"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"    @Listener\n    public void onRefresh(LanguageRefreshEvent event) {\n        refreshMessage(event.getSelectedLanguage());\n    }\n")),(0,i.kt)("h3",{id:"using-a-prefab"},"Using a prefab"),(0,i.kt)("p",null,"There are a great variety of ",(0,i.kt)("em",{parentName:"p"},"JavaFX")," nodes ready to be used with language identifiers. You can find all these nodes in\nthe ",(0,i.kt)("inlineCode",{parentName:"p"},"net.jamsimulator.jams.language.wrapper")," package."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"new LanguageLabel(Messages.ACTION_FOLDER_EXPLORER_ELEMENT_NEW_FOLDER)\n")))}m.isMDXComponent=!0}}]);